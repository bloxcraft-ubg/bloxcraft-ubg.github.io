<!-- Copyright (c) Bloxcraft Studios 2025 -->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bloxcraft UBG - Proxy Browser</title>
<link rel="shortcut icon" type="image/png" href="/bloxcraft.png">
<style>
body {
  font-family: system-ui,Segoe UI,Arial;
  max-width: 1000px;
  margin: 32px auto;
  padding: 0 16px;
  background-image: url('/homepage_background.png');
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;
  background-attachment: fixed;
}
input#url {
  width: calc(60% - 8px);
  padding: 12px 20px;
  font-size: 16px;
  color: #333;
  border: 1px solid #ccc;
  border-radius: 8px;
  margin-right: 8px;
}

#go {
  padding: 12px 20px;
  font-size: 16px;
  color: #fff;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  background: linear-gradient(to bottom,#0077c2,#005f9c);
  margin-right: 5px;
}
#go:hover {
  background: linear-gradient(to bottom,#0088e0,#006eb5);
}

  
#back {
  padding: 12px 20px;
  font-size: 16px;
  color: #fff;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  background: linear-gradient(to bottom,#5555ff,#3333cc);
  margin-right: 5px;
}
#back:hover {
  background: linear-gradient(to bottom,#6666ff,#4444cc);
}

#forward {
  padding: 12px 20px;
  font-size: 16px;
  color: #fff;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  background: linear-gradient(to bottom,#00cc66,#009944);
  margin-right: 5px;
}
#forward:hover {
  background: linear-gradient(to bottom,#33dd77,#00aa55);
}

#refresh {
  padding: 12px 20px;
  font-size: 16px;
  color: #fff;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  background: linear-gradient(to bottom,#ff9933,#cc6600);
}
#refresh:hover {
  background: linear-gradient(to bottom,#ffaa55,#dd7700);
}

iframe#viewer {
  width: 100%;
  height: 80vh;
  border: 1px solid #ccc;
  margin-top: 12px;
}
footer {
  text-align: center;
  margin-top: 12px;
  font-size: 14px;
  color: #fff;
}
</style>
</head>
<body>
<h1>Bloxcraft UBG - Proxy Browser</h1>
<h2>Enter a URL and click "Visit" to browse the site:</h2>
<p>Bugs? Report Them To The Discord Server! </p>

<input id="url" placeholder="https://example.com" />
<button id="go">Visit ➤</button>
<p>&nbsp;</p>
<button id="back">⬅</button>
<button id="forward">➡</button>
<button id="refresh">⟳</button>

<iframe id="viewer"></iframe>

<script>
const WORKER_URLS = [
  'https://school-static.sweet-dawn-d933.workers.dev/',
  'https://school-static.sweet-dawn-d933.workers.dev/',
  'https://school-static.sweet-dawn-d933.workers.dev/'
];

const iframe = document.getElementById('viewer');
const historyStack = [];
const forwardStack = [];

async function tryWorkers(url) {
  for (const worker of WORKER_URLS) {
    try {
      const test = await fetch(`${worker}?url=${encodeURIComponent(url)}`, { method: 'HEAD' });
      if (test.ok) return worker;
    } catch(e) {
      console.log(`Worker failed: ${worker}`, e);
    }
  }
  return null;
}

async function loadUrl(url, pushHistory = true) {
  if (!url) return;
  const worker = await tryWorkers(url);
  if (!worker) {
    alert('ERROR: All proxy stations are blocked by your blocker, page does not exist, or somthing else. Report these bugs to the Discord Server, so we can fix it!');
    return;
  }
  iframe.src = `${worker}?url=${encodeURIComponent(url)}`;
  if (pushHistory) {
    historyStack.push({ url, worker });
    forwardStack.length = 0;
  }
}

document.getElementById('go').addEventListener('click', async () => {
  const target = document.getElementById('url').value.trim();
  if (!target) { alert('Enter a URL'); return; }
  await loadUrl(target);
});

document.getElementById('back').addEventListener('click', () => {
  if (historyStack.length <= 1) return;
  const current = historyStack.pop();
  forwardStack.push(current);
  const previous = historyStack[historyStack.length - 1];
  iframe.src = `${previous.worker}?url=${encodeURIComponent(previous.url)}`;
});

document.getElementById('forward').addEventListener('click', () => {
  if (!forwardStack.length) return;
  const next = forwardStack.pop();
  iframe.src = `${next.worker}?url=${encodeURIComponent(next.url)}`;
  historyStack.push(next);
});

document.getElementById('refresh').addEventListener('click', () => {
  if (!historyStack.length) return;
  const current = historyStack[historyStack.length - 1];
  iframe.src = `${current.worker}?url=${encodeURIComponent(current.url)}`;
});
</script>

<footer>
  <p>Copyright (c) Bloxcraft Studios 2025</p>
</footer>
</body>
</html>

